{% trans_default_domain 'FOSUserBundle' %}

<div class="container my-3">
    <div class="row pb-5">
        <div class="col-md-4 pl-md-0">
            <div class="bloc-belatika rounded p-2 box-shadow my-2 my-md-0">
                <h2><i class="fas fa-user"></i> {{ 'Mes informations'|gTrans }}</h2>
                <p><span class="font-weight-bold">{{ 'profile.show.username'|trans }}:</span> {{ user.username }}</p>
                <p><span class="font-weight-bold">{{ 'profile.show.email'|trans }}:</span> {{ user.email }}</p>
                {% if not app.user.hasSocial %}
                    <a class="btn btn-sm bt-btn--secondary" href="{{ path('fos_user_profile_edit') }}">{{ 'Modifier'|gTrans }}</a>
                {% endif %}
                {% if not app.user.social %}
                    <a href="{{ path('fos_user_profile_edit') }}" class="btn btn-info btn-sm">{{ 'Modifier'|gTrans }}</a>
                {% endif %}
                <a href="{{ path('fos_user_security_logout') }}" class="btn btn-danger btn-sm">{{ 'Deconnexion'|gTrans }}</a>
            </div>
        </div>

        <div class="col-md-4">
            <div class="bloc-belatika rounded p-2 box-shadow my-2 my-md-0">
                <h2><i class="fas fa-shipping-fast"></i> {{ 'Mes adresses'|gTrans }}</h2>
                <h3 class="text-black">{{ 'Livraison'|gTrans }}</h3>
                {% if user.deliveryAddress %}
                    <p>{{ user.deliveryAddress.fullAddress }}</p>
                {% else %}
                    <p>{{ 'Aucune adresse enregistrée.'|gTrans }}</p>
                {% endif %}
                <h3 class="text-black">{{ 'Facturation'|gTrans }}</h3>
                {% if not user.billingAddress %}
                    <p>{{ 'Aucune adresse enregistrée.'|gTrans }}</p>
                {% elseif
                    user.deliveryAddress
                    and (
                        user.deliveryAddress.id == user.billingAddress.id
                        or user.deliveryAddress.fullAddress == user.billingAddress.fullAddress
                    )
                %}
                    <p>{{ 'Adresse de facturation identique à l\'adresse de livraison.'|gTrans }}</p>
                {% else %}
                    <p>{{ user.billingAddress.fullAddress }}</p>
                {% endif %}
                <a href="{{ path('app_user_address') }}" class="btn btn-sm bt-btn--secondary">{{ 'Gérer mes adresses'|gTrans }}</a>
            </div>
        </div>

        <div class="col-md-4 pr-md-0">
            <div class="bloc-belatika rounded p-2 box-shadow my-2 my-md-0">
                <h2><i class="fas fa-dolly"></i> {{ 'Mes commandes'|gTrans }}</h2>
                {% if user.customerOrders|length > 0 %}
                    <ul>
                        {% for order in user.customerOrders %}
                            {% if order.reference %}
                                <li><a class="text-dark" href="{{ path('app_user_order', {'reference' : order.reference}) }}">{{ order.orderedAt|date('d/m/Y') }} - {{ order.total|number_format(2, ',') }}€</a></li>
                            {% endif %}
                        {% endfor %}
                    </ul>
                {% else %}
                    <p>{{ 'Aucune commande.'|gTrans }}</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>
